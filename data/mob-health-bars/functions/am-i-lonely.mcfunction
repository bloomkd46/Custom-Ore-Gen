execute as @a at @a run execute unless entity @e[limit=1,type=!#mob-health-bars:excluded-entities, distance=..20] run tag @s add lonely
execute as @a at @a run execute if entity @e[limit=1,type=!#mob-health-bars:excluded-entities, distance=..20] run tag @s remove lonely
bossbar set 1 players @a[tag=!lonely,tag=p1] 
bossbar set 2 players @a[tag=!lonely,tag=p2] 
bossbar set 3 players @a[tag=!lonely,tag=p3] 
bossbar set 4 players @a[tag=!lonely,tag=p4] 
bossbar set 5 players @a[tag=!lonely,tag=p5] 
bossbar set 6 players @a[tag=!lonely,tag=p6] 
bossbar set 7 players @a[tag=!lonely,tag=p7] 
bossbar set 8 players @a[tag=!lonely,tag=p8] 
bossbar set 9 players @a[tag=!lonely,tag=p9] 
bossbar set 10 players @a[tag=!lonely,tag=p10]
bossbar set 11 players @a[tag=!lonely,tag=p11]
bossbar set 12 players @a[tag=!lonely,tag=p12]
bossbar set 13 players @a[tag=!lonely,tag=p13]
bossbar set 14 players @a[tag=!lonely,tag=p14]
bossbar set 15 players @a[tag=!lonely,tag=p15]
bossbar set 16 players @a[tag=!lonely,tag=p16]
bossbar set 17 players @a[tag=!lonely,tag=p17]
bossbar set 18 players @a[tag=!lonely,tag=p18]
bossbar set 19 players @a[tag=!lonely,tag=p19]
bossbar set 20 players @a[tag=!lonely,tag=p20]
# execute as @a[distance=..20,tag=p1] run bossbar set 1 visible true
# execute as @a[distance=..20,tag=p2] run bossbar set 2 visible true
# execute as @a[distance=..20,tag=p3] run bossbar set 3 visible true
# execute as @a[distance=..20,tag=p4] run bossbar set 4 visible true
# execute as @a[distance=..20,tag=p5] run bossbar set 5 visible true
# execute as @a[distance=..20,tag=p6] run bossbar set 6 visible true
# execute as @a[distance=..20,tag=p7] run bossbar set 7 visible true
# execute as @a[distance=..20,tag=p8] run bossbar set 8 visible true
# execute as @a[distance=..20,tag=p9] run bossbar set 9 visible true
# execute as @a[distance=..20,tag=p10] run bossbar set 10 visible true
# execute as @a[distance=..20,tag=p11] run bossbar set 11 visible true
# execute as @a[distance=..20,tag=p12] run bossbar set 12 visible true
# execute as @a[distance=..20,tag=p13] run bossbar set 13 visible true
# execute as @a[distance=..20,tag=p14] run bossbar set 14 visible true
# execute as @a[distance=..20,tag=p15] run bossbar set 15 visible true
# execute as @a[distance=..20,tag=p16] run bossbar set 16 visible true
# execute as @a[distance=..20,tag=p17] run bossbar set 17 visible true
# execute as @a[distance=..20,tag=p18] run bossbar set 18 visible true
# execute as @a[distance=..20,tag=p19] run bossbar set 19 visible true
# execute as @a[distance=..20,tag=p20] run bossbar set 20 visible true

# execute as @a[distance=..20,tag=p1] run bossbar set 1 visible false
# execute as @a[distance=..20,tag=p2] run bossbar set 2 visible false
# execute as @a[distance=..20,tag=p3] run bossbar set 3 visible false
# execute as @a[distance=..20,tag=p4] run bossbar set 4 visible false
# execute as @a[distance=..20,tag=p5] run bossbar set 5 visible false
# execute as @a[distance=..20,tag=p6] run bossbar set 6 visible false
# execute as @a[distance=..20,tag=p7] run bossbar set 7 visible false
# execute as @a[distance=..20,tag=p8] run bossbar set 8 visible false
# execute as @a[distance=..20,tag=p9] run bossbar set 9 visible false
# execute as @a[distance=..20,tag=p10] run bossbar set 10 visible false
# execute as @a[distance=..20,tag=p11] run bossbar set 11 visible false
# execute as @a[distance=..20,tag=p12] run bossbar set 12 visible false
# execute as @a[distance=..20,tag=p13] run bossbar set 13 visible false
# execute as @a[distance=..20,tag=p14] run bossbar set 14 visible false
# execute as @a[distance=..20,tag=p15] run bossbar set 15 visible false
# execute as @a[distance=..20,tag=p16] run bossbar set 16 visible false
# execute as @a[distance=..20,tag=p17] run bossbar set 17 visible false
# execute as @a[distance=..20,tag=p18] run bossbar set 18 visible false
# execute as @a[distance=..20,tag=p19] run bossbar set 19 visible false
# execute as @a[distance=..20,tag=p20] run bossbar set 20 visible false

